<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.taikang.health.iams.dao.AutzRoleDao">

    <resultMap id="AutzRoleResultMap" type="com.taikang.health.iams.po.AutzRolePO">
        <id property="id" column="role_id" javaType="String" jdbcType="VARCHAR"/>
        <result property="roleName" column="role_name" javaType="String" jdbcType="VARCHAR"/>
        <result property="roleCode" column="role_code" javaType="String" jdbcType="VARCHAR"/>
        <result property="status" column="status" javaType="Integer" jdbcType="SMALLINT"/>
        <result property="createTime" column="create_time" javaType="Date" jdbcType="DATE"/>
        <result property="updateTime" column="create_time" javaType="Date" jdbcType="DATE"/>
    </resultMap>

    <!---========================自定义查询放置下方========================-->
    <!--自定义查询-->
    <select id="getRolesByUserId" parameterType="java.lang.String" resultMap="AutzRoleResultMap">
              SELECT
          ur.`role_id`,
          ur.`role_code`,
          ur.`role_name`,
          ur.status,
          ur.create_time
        FROM
          autz_user u
          INNER JOIN autz_user_role r
            ON u.`user_id` = r.`user_id`
          INNER JOIN autz_role ur
            ON r.`role_id` = ur.`role_id`
        WHERE u.`user_id` = #{userId}
          AND u.`enable` = 1
          AND ur.`status` = 1
    </select>

</mapper>