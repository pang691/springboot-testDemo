<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.taikang.health.iams.dao.AutzUserRoleDao">

    <resultMap id="AutzUserRoleResultMap" type="com.taikang.health.iams.po.AutzUserRolePO">
        <id property="id" column="user_role_id" javaType="String" jdbcType="VARCHAR"/>
        <result property="userId" column="user_id" javaType="String" jdbcType="VARCHAR"/>
        <result property="roleId" column="role_id" javaType="String" jdbcType="VARCHAR"/>
        <result property="createTime" column="create_time" javaType="Date" jdbcType="DATE"/>
        <result property="updateTime" column="update_time" javaType="Date" jdbcType="DATE"/>
    </resultMap>

    <insert id="insertBatch">
        insert into autz_user_role (user_role_id,user_id,role_id,create_time,update_time)
        values
        <foreach collection="list" item="e" separator=",">
            (#{e.id},#{e.userId},#{e.roleId},#{e.createTime},#{e.updateTime})
        </foreach>
    </insert>

    <delete id="deleteUserRole" parameterType="com.taikang.health.iams.po.AutzUserRolePO">
        delete from autz_user_role where user_id=#{userId}
        <if test="roleId != '' and id != roleId">
            and role_id = #{roleId}
        </if>
    </delete>

    <insert id="insertUserRolePost" parameterType="com.taikang.health.iams.bo.UserRolePost">
        insert into autz_user_role
        (
        user_role_id,
        user_id,
        role_id,
        remark,
        create_time,
        update_time
        )
        value
        (
        id,
        userId,
        roleId,
        "1",
        now(),
        now()
        )
    </insert>
</mapper>