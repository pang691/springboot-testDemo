<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.taikang.health.iams.dao.AutzPermissionDao">

    <resultMap id="Permission" type="com.taikang.health.iams.po.AutzPermissionPO">
        <id column="PERMISSION_ID" jdbcType="VARCHAR" property="id" />
        <result column="MODULE" jdbcType="VARCHAR" property="module" />
        <result column="URI" jdbcType="VARCHAR" property="uri" />
        <result column="OPERATION" jdbcType="VARCHAR" property="operation" />
        <result column="REMARK" jdbcType="VARCHAR" property="remark" />
        <result column="PRIORITY" jdbcType="VARCHAR" property="priority" />
        <result column="ENABLE" jdbcType="VARCHAR" property="enable" />
    </resultMap>

    <select id="listPermision" parameterType="java.lang.String" resultMap="Permission">
        SELECT  a.* from autz_permission a
        LEFT JOIN autz_setting_permission b on b.PERMISSION_ID = a.PERMISSION_ID
        LEFT JOIN autz_setting c ON c.SETTING_ID = b.SETTING_ID
        LEFT JOIN autz_user_role d ON d.role_id =c.SETTING_FOR where d.USER_ID=#{userId}
    </select>

</mapper>