<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.taikang.health.iams.dao.AutzUserDao">

    <resultMap id="AutzUserResultMap" type="com.taikang.health.iams.po.AutzUserPO">
        <id property="id" column="user_id" javaType="String" jdbcType="VARCHAR"/>
        <result property="name" column="name" javaType="String" jdbcType="VARCHAR"/>
        <result property="username" column="username" javaType="String" jdbcType="VARCHAR"/>
        <result property="password" column="password" javaType="String" jdbcType="VARCHAR"/>
        <result property="email" column="email" javaType="String" jdbcType="VARCHAR"/>
        <result property="lastLoginIp" column="last_login_ip" javaType="String" jdbcType="VARCHAR"/>
        <result property="lastLoginTime" column="last_login_time" javaType="Date" jdbcType="DATE"/>
        <result property="enable" column="enable" javaType="Integer" jdbcType="SMALLINT"/>
    </resultMap>

    <!---========================自定义查询放置下方========================-->
    <!--自定义查询-->
    <select id="getByUserName" parameterType="java.lang.String" resultMap="AutzUserResultMap">
		SELECT * from autz_user a where a.enable=1 and a.username=#{username}
	</select>

    <select id="getByUserId" parameterType="java.lang.String" resultMap="AutzUserResultMap">
		SELECT * from autz_user a where a.enable=1 and a.user_id=#{id}
	</select>

    <insert id="addAutzUser" parameterType="com.taikang.health.iams.po.AutzUserPO">
        INSERT  INTO  autz_user (user_id,`name`,username,password,email,last_login_ip)
                          values(#{id},#{name},#{username},#{password},#{email},#{lastLoginIp})
    </insert>

    <delete id="deleteByUserId" parameterType="list">
        delete from autz_user
        where
        1=1
        <if test="list != null and list.size()>0">
            and user_id in
            <foreach collection="list" index="index" item="item" open="(" separator="," close=")">
                #{item.id}
            </foreach>
        </if>
    </delete>

    <select id="queryAutzUser" parameterType="com.taikang.health.iams.po.AutzUserPO" resultMap="AutzUserResultMap">
        SELECT * from autz_user a where 1=1 and a.enable=1
        <if test="id != '' and id != null">
            and user_id = #{id}
        </if>
        <if test="name != '' and name != null">
            and `name` = #{name}
        </if>
        <if test="username != '' and username != null">
            and username = #{username}
        </if>
        <if test="password != '' and password != null">
            and password = #{password}
        </if>
    </select>
    
    <select id="selectSingle" parameterType="" resultType="">
        select * from autz_user where username = #{username} and password = #{password} and enable='1';
    </select>

    <insert id="insertAutzUserPO" parameterType="com.taikang.health.iams.po.AutzUserPO">
        insert into autz_user
        (
        user_id,
        name,
        username,
        password,
        email,
        last_login_ip,
        last_login_time
        )
        value
        (
        id,
        name ,
        username,
        password,
        email,
        lastLoginIp,
        lastLoginTime
        )
    </insert>
</mapper>